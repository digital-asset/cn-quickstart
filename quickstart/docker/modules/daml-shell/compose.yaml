# Copyright (c) 2024, Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

---
x-vars:
  qs-project-labels: &qs_project_label
    qs.project.label: ${PROJECT_LABEL}

networks:
  quickstart:
    external: true
    name: ${DOCKER_NETWORK}
    labels: *qs_project_label

services:
  daml-shell:
    image: ${SHELL_IMAGE}:${SHELL_VERSION}
    mem_limit: 512mb
    environment:
      _JAVA_OPTIONS: "-XX:-UseCompressedOops -Xms256m -Xmx384m"
      DAML_SHELL_POSTGRES_HOST: "${DB_SERVER}"
      DAML_SHELL_POSTGRES_USERNAME: "${DB_USER}"
      DAML_SHELL_POSTGRES_PASSWORD: "${DB_PASSWORD}"
      DAML_SHELL_POSTGRES_DATABASE: "${SHELL_DB:-pqs-app-provider}"
    networks:
      - ${DOCKER_NETWORK}
    command: --connect
    stdin_open: true
    tty: true
    labels: *qs_project_label