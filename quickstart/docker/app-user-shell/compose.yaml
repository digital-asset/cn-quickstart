# Copyright (c) 2024, Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

---
x-vars:

  app-provider-auth-env: &app-provider-auth-env
    path: ${APP_PROVIDER_AUTH_ENV}
    required: false

  app-user-auth-env: &app-user-auth-env
    path: ${APP_USER_AUTH_ENV}
    required: false

networks:
  quickstart:
    external: true
    name: ${DOCKER_NETWORK}

services:
  create-app-install-request:
    build: .
    container_name: create-app-install-request
    volumes:
      - ./scripts/start.sh:/app/start.sh
      - ./scripts/create-app-install-request-${AUTH_MODE}.sh:/app/create-app-install-request.sh
      - ${MODULES_DIR}/onboarding/docker/utils.sh:/app/utils.sh
    env_file:
      - ${LOCALNET_ENV_DIR}/common.env
      - *app-provider-auth-env
      - *app-user-auth-env
    command: /app/start.sh
    networks:
      - ${DOCKER_NETWORK}